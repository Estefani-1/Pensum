<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¡Construyendo tu futuro matemático! 🎓💜</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9f7fc;
      color: #333;
      padding: 2rem;
    }
    h1 {
      color: #6a1b9a;
      text-align: center;
    }
    .motivacion {
      text-align: center;
      font-style: italic;
      margin-bottom: 1.5rem;
      color: #7b1fa2;
    }
    .periodo {
      background-color: #f3e5f5;
      border-left: 5px solid #6a1b9a;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 8px;
    }
    .asignatura {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 0.3rem 0;
      flex-wrap: wrap;
    }
    input[type="checkbox"] {
      margin-right: 0.5rem;
      transform: scale(1.3);
    }
    .completada {
      background-color: #ce93d8;
      padding: 0.2rem 0.5rem;
      border-radius: 5px;
    }
    select {
      margin-left: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 3px;
    }
    #progreso-container {
      margin-top: 2rem;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>¡Construyendo tu futuro matemático! 🎓💜</h1>
  <p class="motivacion">Cada materia, una meta. ¡Sigue adelante con pasión por enseñar! 📚</p>

  <div id="malla"></div>
  <div id="progreso-container">Progreso: 0% | Índice general: 0.00</div>

  <script>
    const escala = {
      'A': 4.0,
      'B': 3.0,
      'C': 2.0,
      'D': 1.0,
      'F': 0.0
    };

    const pensum = {
      "0": [{ nombre: "ORI-100 · Orientación Universitaria", creditos: 1 }],
      "1": [
        { nombre: "BIO-100 · Biología General", creditos: 3 },
        { nombre: "BIO-100-L · Biología General - Práctica", creditos: 1 },
        { nombre: "EDU-107 · Técnicas de Estudio e Investigación", creditos: 2 },
        { nombre: "EDU-165 · Tecnología de la Información", creditos: 2 },
        { nombre: "FIL-108 · Filosofía General", creditos: 3 },
        { nombre: "LET-104 · Expresión Oral y Escrita", creditos: 3 },
        { nombre: "LEX-104 · Inglés I", creditos: 3 },
        { nombre: "MAT-114 · Aritmética y Geometría", creditos: 4 }
      ],
      // Agrega los demás periodos con sus asignaturas y créditos aquí...
    };

    const mallaDiv = document.getElementById('malla');
    const progresoText = document.getElementById('progreso-container');

    function renderMalla() {
      let total = 0, completadas = 0;
      let sumaPuntos = 0, sumaCreditos = 0;
      mallaDiv.innerHTML = '';

      for (let periodo in pensum) {
        const periodoDiv = document.createElement('div');
        periodoDiv.className = 'periodo';
        periodoDiv.innerHTML = `<h3>📘 Periodo ${periodo}</h3>`;

        pensum[periodo].forEach((asig, index) => {
          const key = `p${periodo}a${index}`;
          const notaKey = `${key}_nota`;
          const checked = localStorage.getItem(key) === 'true';
          const savedNota = localStorage.getItem(notaKey) || '';

          const div = document.createElement('div');
          div.className = 'asignatura';
          if (checked) div.classList.add('completada');

          const leftDiv = document.createElement('div');
          leftDiv.style.display = 'flex';
          leftDiv.style.alignItems = 'center';

          const checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.checked = checked;
          checkbox.addEventListener('change', () => {
            localStorage.setItem(key, checkbox.checked);
            renderMalla();
          });

          const label = document.createElement('label');
          label.textContent = `${asig.nombre} (${asig.creditos} cr)`;

          leftDiv.appendChild(checkbox);
          leftDiv.appendChild(label);

          const select = document.createElement('select');
          ['','A','B','C','D','F'].forEach(nota => {
            const option = document.createElement('option');
            option.value = nota;
            option.textContent = nota;
            if (nota === savedNota) option.selected = true;
            select.appendChild(option);
          });
          select.addEventListener('change', () => {
            localStorage.setItem(notaKey, select.value);
            renderMalla();
          });

          div.appendChild(leftDiv);
          div.appendChild(select);
          periodoDiv.appendChild(div);

          total++;
          if (checked) completadas++;
          if (savedNota && escala[savedNota] !== undefined) {
            sumaPuntos += escala[savedNota] * asig.creditos;
            sumaCreditos += asig.creditos;
          }
        });
        mallaDiv.appendChild(periodoDiv);
      }

      const progreso = Math.round((completadas / total) * 100);
      const indice = sumaCreditos ? (sumaPuntos / sumaCreditos).toFixed(2) : '0.00';
      progresoText.textContent = `Progreso: ${progreso}% | Índice general: ${indice}`;
    }

    renderMalla();
  </script>
</body>
</html>
